<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comondi - ุชูุตูู ุงูุทุนุงู | Livraison de Nourriture</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Language Switcher -->
    <div class="language-switcher">
        <button onclick="switchLanguage('ar')" class="lang-btn active" id="ar-btn">ุงูุนุฑุจูุฉ</button>
        <button onclick="switchLanguage('fr')" class="lang-btn" id="fr-btn">Franรงais</button>
    </div>

    <!-- Login/Registration Screen -->
    <div id="auth-screen" class="screen active">
        <div class="auth-container">
            <div class="logo">
                <h1>Comondi</h1>
                <p class="tagline" data-ar="ุฑุจุท ููุตูู ุงูุทุนุงู ูุน ุงูุฒุจุงุฆู" data-fr="Connecter les livreurs avec les clients">ุฑุจุท ููุตูู ุงูุทุนุงู ูุน ุงูุฒุจุงุฆู</p>
            </div>
            
            <div class="auth-tabs">
                <button class="tab-btn active" onclick="showAuthTab('customer')" data-ar="ุฒุจูู" data-fr="Client">ุฒุจูู</button>
                <button class="tab-btn" onclick="showAuthTab('driver')" data-ar="ููุตู ุทุนุงู" data-fr="Livreur">ููุตู ุทุนุงู</button>
            </div>

            <div class="auth-form">
                <input type="text" id="username" placeholder="ุงูุงุณู / Nom" data-ar-placeholder="ุงูุงุณู" data-fr-placeholder="Nom">
                <input type="tel" id="phone" placeholder="ุฑูู ุงููุงุชู / Tรฉlรฉphone" data-ar-placeholder="ุฑูู ุงููุงุชู" data-fr-placeholder="Tรฉlรฉphone">
                <button onclick="login()" class="primary-btn" data-ar="ุชุณุฌูู ุงูุฏุฎูู" data-fr="Se connecter">ุชุณุฌูู ุงูุฏุฎูู</button>
            </div>
        </div>
    </div>

    <!-- Customer Screen -->
    <div id="customer-screen" class="screen">
        <div class="header">
            <h2 data-ar="ุทูุจ ุฌุฏูุฏ" data-fr="Nouvelle commande">ุทูุจ ุฌุฏูุฏ</h2>
            <button onclick="logout()" class="logout-btn" data-ar="ุฎุฑูุฌ" data-fr="Dรฉconnexion">ุฎุฑูุฌ</button>
        </div>

        <div class="order-form">
            <div class="form-group">
                <label data-ar="ุงุณู ุงูุฃูู:" data-fr="Nom du plat:">ุงุณู ุงูุฃูู:</label>
                <input type="text" id="food-name" placeholder="Sandwich, Tacos..." data-ar-placeholder="ุณุงูุฏููุชุดุ ุชุงููุณ..." data-fr-placeholder="Sandwich, Tacos...">
            </div>

            <div class="form-group">
                <label data-ar="ุงุณู ุงููุญู:" data-fr="Nom du restaurant:">ุงุณู ุงููุญู:</label>
                <input type="text" id="restaurant-name" placeholder="ADM Food" data-ar-placeholder="ูุซุงู: ADM Food" data-fr-placeholder="Ex: ADM Food">
            </div>

            <div class="form-group">
                <label data-ar="ููุงุญุธุงุช ุฅุถุงููุฉ:" data-fr="Notes supplรฉmentaires:">ููุงุญุธุงุช ุฅุถุงููุฉ:</label>
                <textarea id="notes" rows="3" placeholder="" data-ar-placeholder="ุฃู ุชูุงุตูู ุฅุถุงููุฉ..." data-fr-placeholder="Dรฉtails supplรฉmentaires..."></textarea>
            </div>

            <button onclick="shareLocation()" class="primary-btn location-btn">
                <span data-ar="๐ ูุดุงุฑูุฉ ุงููููุน ูุฅุฑุณุงู ุงูุทูุจ" data-fr="๐ Partager la localisation et envoyer">๐ ูุดุงุฑูุฉ ุงููููุน ูุฅุฑุณุงู ุงูุทูุจ</span>
            </button>
        </div>

        <!-- Order Status -->
        <div id="customer-status" class="status-container" style="display: none;">
            <h3 data-ar="ุญุงูุฉ ุงูุทูุจ" data-fr="รtat de la commande">ุญุงูุฉ ุงูุทูุจ</h3>
            <div class="status-text" id="status-text"></div>
            
            <div id="map-container" class="map-container">
                <div id="customer-map" class="map"></div>
            </div>

            <div id="invoice-container" style="display: none;">
                <h4 data-ar="ูุงุชูุฑุฉ ุงูููุชุฌุงุช" data-fr="Facture des produits">ูุงุชูุฑุฉ ุงูููุชุฌุงุช</h4>
                <img id="invoice-image" src="" alt="Invoice" class="invoice-image">
            </div>

            <div class="driver-info" id="driver-info" style="display: none;">
                <p><strong data-ar="ุฑูู ูุงุชู ุงูููุตู:" data-fr="Tรฉlรฉphone du livreur:">ุฑูู ูุงุชู ุงูููุตู:</strong> <span id="driver-phone"></span></p>
            </div>

            <div id="success-message" class="success-message" style="display: none;">
                <div class="success-icon">โ</div>
                <h3 data-ar="ุชู ุงูุชูุตูู ุจูุฌุงุญ!" data-fr="Livraison rรฉussie!">ุชู ุงูุชูุตูู ุจูุฌุงุญ!</h3>
            </div>
        </div>
    </div>

    <!-- Driver Screen -->
    <div id="driver-screen" class="screen">
        <div class="header">
            <h2 data-ar="ุงูุทูุจุงุช ุงููุชุงุญุฉ" data-fr="Commandes disponibles">ุงูุทูุจุงุช ุงููุชุงุญุฉ</h2>
            <button onclick="logout()" class="logout-btn" data-ar="ุฎุฑูุฌ" data-fr="Dรฉconnexion">ุฎุฑูุฌ</button>
        </div>

        <div id="available-orders" class="orders-list"></div>

        <!-- Active Order Management -->
        <div id="active-order" class="active-order-container" style="display: none;">
            <h3 data-ar="ุงูุทูุจ ุงููุดุท" data-fr="Commande active">ุงูุทูุจ ุงููุดุท</h3>
            
            <div class="order-details" id="order-details"></div>

            <div id="driver-map-container" class="map-container">
                <div id="driver-map" class="map"></div>
            </div>

            <div class="status-buttons">
                <button onclick="updateStatus('going-to-restaurant')" class="status-btn" data-ar="๐ช ูู ุทุฑููู ุฅูู ุงููุญู" data-fr="๐ช En route vers le restaurant">๐ช ูู ุทุฑููู ุฅูู ุงููุญู</button>
                <button onclick="updateStatus('at-restaurant')" class="status-btn" data-ar="๐ฆ ุชู ุทูุจ ุงุญุชูุงุฌูู" data-fr="๐ฆ Commande rรฉcupรฉrรฉe">๐ฆ ุชู ุทูุจ ุงุญุชูุงุฌูู</button>
                <button onclick="uploadInvoice()" class="status-btn" data-ar="๐ธ ุชุตููุฑ ุงููุงุชูุฑุฉ" data-fr="๐ธ Prendre photo facture">๐ธ ุชุตููุฑ ุงููุงุชูุฑุฉ</button>
                <button onclick="updateStatus('on-the-way')" class="status-btn" data-ar="๐๏ธ ูู ุงูุทุฑูู ุฅููู" data-fr="๐๏ธ En route vers vous">๐๏ธ ูู ุงูุทุฑูู ุฅููู</button>
                <button onclick="completeDelivery()" class="status-btn complete-btn" data-ar="โ ุชู ุงูุชูุตูู" data-fr="โ Livraison terminรฉe">โ ุชู ุงูุชูุตูู</button>
            </div>

            <input type="file" id="invoice-upload" accept="image/*" style="display: none;" onchange="handleInvoiceUpload(event)">
        </div>
    </div>

    <!-- Audio for notifications -->
    <audio id="notification-sound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUKXh8LJnGwU7k9n0yHkpBCR2xe/bjz8JE12y5+qnUxIKRp/g8r5sIAUrlc7y2Ik3CBtpvPDim0wMDlCl4fCyZxsFO5PY9Mh5KQQkdsXv2488CRNdsubnp1MSCkaf4PK+bCAFK5bO8tiJNwgbabzw45tMDA5QpeHwsmcbBTuT2PTIeSkEJHbF79uPPAkTXbLm56dUEgpGn+DyvmwgBSuWzvLYiTcIG2m88OObTAwOUKXh8LJnGwU7k9j0yHkpBCR2xe/bjzwJE12y5uenVBIKRp/g8r5sIAUrlc7y2Ik3CBxpu/DnnU0MDlCl4fCyZxsFO5PY9Mh5KQQkdsXv2488CRNdsubnp1QSCkaf4PK+bCAFK5XO8tiJNwgcabvw551NDA5QpeHwsmcbBTuT2PTIeSkEJHbF79uPPAkTXbLm56dUEgpGn+DyvmwgBSuVzvLYiTcIHGm78OedTQwOUKXh8LJnGwU7k9j0yHkpBCR2xe/bjzwJE12y5uenVBIKRp/g8r5sIAUrlc7y2Ik3CBxpu/DnnU0MDlCl4fCyZxsFO5PY9Mh5KQQkdsXv2488CRNdsubnp1QSCkaf4PK+bCAFK5XO8tiJNwgcabvw551NDA5QpeHwsmcbBTuT2PTIeSkEJHbF79uPPAkTXbLm56dUEgpGn+DyvmwgBSuVzvLYiTcIHGm78OedTQwOUKXh8LJnGwU7k9j0yHkpBCR2xe/bjzwJE12y5uenVBIKRp/g8r5sIAUrlc7y2Ik3CBxpu/DnnU0MDlCl4fCyZxsFO5PY9Mh5KQQkdsXv2488CRNdsubnp1QSCkaf4PK+bCAFK5XO8tiJNwgcabvw551NDA5QpeHwsmcbBTuT2PTIeSkEJHbF79uPPAkTXbLm56dUEgpGn+DyvmwgBSuVzvLYiTcIHGm78OedTQwOUKXh8LJnGwU7k9j0yHkpBCR2xe/bjzwJE12y5uenVBIKRp/g8r5sIAUrlc7y2Ik3CBxpu/DnnU0MDlCl4fCyZxsFO5PY9Mh5KQQkdsXv2488CRNdsubnp1QSCkaf4PK+bCAFK5XO8tiJNwgcabvw551NDA5QpeHwsmcbBTuT2PTIeSkEJHbF79uPPAkTXbLm56dUEgo=" type="audio/wav">
    </audio>

    <script type="module" src="app.js"></script>
</body>
</html>
